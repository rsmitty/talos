


<!DOCTYPE html>
<html lang="en-us">

<head>
  













<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="description" content="Creating Talos Kubernetes cluster using Proxmox.">




<link rel="canonical" href="https://talos.dev/docs/latest/virtualized-platforms/proxmox/">



<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://talos.dev/img/logos/longhorn-icon-color.png">
<meta name="twitter:image:alt" content="Talos Linux color logo">



<meta property="og:url" content="https://talos.dev/docs/v0.10/virtualized-platforms/proxmox/">
<meta property="og:title" content="Talos Linux | Proxmox">

<meta property="og:description" content="Creating Talos Kubernetes cluster using Proxmox.">

<meta property="og:type" content="article">
<meta property="og:site_name" content="Talos Linux">
<meta property="og:image" content="https://talos.dev/img/logos/longhorn-icon-color.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:alt" content="Talos Linux color logo">
<meta property="og:locale" content="en_US">


<meta name="robots" content="noindex">



  <title>
    
Talos Linux | Documentation

  </title>

  









<link rel="stylesheet" href="/css/style.d4f1ecd1424891e50994bf3612432659314faa7af1abc56b06aca280b90673fb.css" integrity="sha256-1PHs0UJIkeUJlL82EkMmWTFPqnrxq8VrBqyigLkGc/s=">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

  <link rel="shortcut icon" type="image/png" sizes="32x32" href="/favicon.png">

</head>
<body>
  





<div class="canvas" id="canvas" x-data="{ drawer: false }">
  







<nav class="navbar is-fixed-top has-shadow" x-data="{ open: false }">
  
    <div class="navbar-brand">
      <a class="navbar-item" href="https://talos.dev">
        <img src="/img/logos/Sidero_horizontal_lightbkgd_RGB.png" alt="Talos Linux navbar logo">
      </a>

      <a role="button" class="navbar-burger" data-target="menu" aria-label="menu" aria-expanded="false" :class="{ 'is-active': open }" @click="open = !open" @click.away="open = false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu" id="menu" :class="{ 'is-active': open }">
      <div class="navbar-end">
        <div class="navbar-item is-hidden-touch">
  <p class="control has-icons-left">
    <input class="input is-rounded" type="text" placeholder="Search" id="search-input">
    <span class="icon is-small is-left">
      <ion-icon name="search-outline"></ion-icon>
    </span>
  </p>
</div>


        


<nav class="navbar" role="navigation" aria-label="dropdown navigation">
  <div class="navbar-item has-dropdown is-hoverable">
    <a class="navbar-link is-arrowless" href="/docs/v1.0">
      <span class="has-text-weight-bold">
        Docs
      </span>
      <span class="icon has-text-secondary">
        <ion-icon name="chevron-down-outline"></ion-icon>
      </span>
    </a>

    <div class="navbar-dropdown">
      
      
      
      <a class="navbar-item" href="/docs/v1.0">
        v1.0 (<strong>latest</strong>)
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.14">
        v0.14
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.13">
        v0.13
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.12">
        v0.12
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.11">
        v0.11
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.10">
        v0.10
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.9">
        v0.9
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.8">
        v0.8
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.7">
        v0.7
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.6">
        v0.6
      </a>
      
    </div>
  </div>
</nav>


        
        




<a class="navbar-item has-text-weight-bold" href="https://sidero.dev"  target="_blank" >
  <span>
    Sidero Metal
  </span>
</a>





<a class="navbar-item has-text-weight-bold" href="https://github.com/talos-systems/talos"  target="_blank" >
  <span>
    GitHub
  </span>
</a>





<a class="navbar-item has-text-weight-bold" href="https://taloscommunity.slack.com"  target="_blank" >
  <span>
    Slack
  </span>
</a>



        

        <div class="navbar-item">
          



<div class="buttons is-left">
  

  

  
</div>

        </div>
      </div>
    </div>
  
</nav>

  

<nav class="navbar is-black is-hidden-desktop under-nav">
  <div class="navbar-brand">
    <div class="navbar-item is-hidden-desktop">
      <a class="button is-black is-borderless has-text-weight-light" @click="drawer = !drawer">
        <span class="icon">
          <ion-icon name="list"></ion-icon>
        </span>
        <span>
          Docs
        </span>
      </a>
    </div>
  </div>
</nav>


  <div class="dashboard">
    
    <div class="dashboard-panel sidebar is-hidden-touch">
      


<aside class="nav is-sidebar">
  

  
  
  
   
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/">
      Welcome
    </a>

    
  </div>

  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/introduction/">
      Introduction
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/introduction/what-is-talos/">
          What is Talos?
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/introduction/quickstart/">
          Quickstart
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/introduction/getting-started/">
          Getting Started
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/introduction/system-requirements/">
          System Requirements
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/introduction/what-is-new/">
          What&#39;s New in Talos 0.10
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/bare-metal-platforms/">
      Bare Metal Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/bare-metal-platforms/digital-rebar/">
          Digital Rebar
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/bare-metal-platforms/equinix-metal/">
          Equinix Metal
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/bare-metal-platforms/matchbox/">
          Matchbox
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/bare-metal-platforms/sidero/">
          Sidero
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/virtualized-platforms/">
      Virtualized Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/virtualized-platforms/hyper-v/">
          Hyper-V
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/virtualized-platforms/kvm/">
          KVM
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a class="is-active" href="/docs/v0.10/virtualized-platforms/proxmox/">
          Proxmox
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/virtualized-platforms/vmware/">
          VMware
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/virtualized-platforms/xen/">
          Xen
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/cloud-platforms/">
      Cloud Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/cloud-platforms/aws/">
          AWS
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/cloud-platforms/azure/">
          Azure
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/cloud-platforms/digitalocean/">
          DigitalOcean
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/cloud-platforms/gcp/">
          GCP
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/cloud-platforms/openstack/">
          Openstack
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/local-platforms/">
      Local Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/local-platforms/docker/">
          Docker
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/local-platforms/firecracker/">
          Firecracker
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/local-platforms/qemu/">
          QEMU
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/local-platforms/virtualbox/">
          VirtualBox
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/single-board-computers/">
      Single Board Computers
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/single-board-computers/bananapi_m64/">
          Banana Pi M64
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/single-board-computers/libretech_all_h3_cc_h5/">
          Libre Computer Board ALL-H3-CC
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/single-board-computers/rock64/">
          Pine64 Rock64
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/single-board-computers/rockpi_4/">
          Radxa ROCK PI 4c
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/single-board-computers/rpi_4/">
          Raspberry Pi 4 Model B
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/guides/">
      Guides
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/advanced-networking/">
          Advanced Networking
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/air-gapped/">
          Air-gapped Environments
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-certificate-authorities/">
          Configuring Certificate Authorities
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-containerd/">
          Configuring Containerd
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-corporate-proxies/">
          Configuring Corporate Proxies
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-network-connectivity/">
          Configuring Network Connectivity
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-pull-through-cache/">
          Configuring Pull Through Cache
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-the-cluster-endpoint/">
          Configuring the Cluster Endpoint
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-wireguard-network/">
          Configuring Wireguard Network
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/converting-control-plane/">
          Converting Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/customizing-the-kernel/">
          Customizing the Kernel
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/customizing-the-root-filesystem/">
          Customizing the Root Filesystem
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/deploy-metrics-server/">
          Deploying Metrics Server
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/disaster-recovery/">
          Disaster Recovery
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/disk-encryption/">
          Disk Encryption
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/editing-machine-configuration/">
          Editing Machine Configuration
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/managing-pki/">
          Managing PKI
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/resetting-a-machine/">
          Resetting a Machine
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/storage/">
          Storage
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/troubleshooting-control-plane/">
          Troubleshooting Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/upgrading-kubernetes/">
          Upgrading Kubernetes
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/upgrading-talos/">
          Upgrading Talos
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/vip/">
          Virtual (shared) IP
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/reference/">
      Reference
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/reference/kernel/">
          Kernel
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/reference/platform/">
          Platform
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/learn-more/">
      Learn More
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/philosophy/">
          Philosophy
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/concepts/">
          Concepts
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/architecture/">
          Architecture
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/components/">
          Components
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/upgrades/">
          Upgrades
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/faqs/">
          FAQs
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/talosctl/">
          talosctl
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/control-plane/">
          Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/controllers-resources/">
          Controllers and Resources
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</aside>

    </div>

    <div class="dashboard-panel main">
      



<section class="hero is-primary is-medium is-bold">
  <div class="hero-body">
    <div class="container">
      <div class="docs-content">
        <p class="title is-size-2 is-size-3-mobile has-text-weight-bold is-spaced">
          Proxmox
        </p>

        
        <p class="subtitle is-size-3 is-size-4-mobile has-text-weight-light">
          Creating Talos Kubernetes cluster using Proxmox.
        </p>
        
      </div>
      <div class="buttons">
        <a class="button is-small" href="https://github.com/longhorn/website/edit/master/content/docs/v0.10/Virtualized%20Platforms/proxmox.md" target="_blank">
          <span class="icon">
            <ion-icon name="logo-github"></ion-icon>
          </span>
          <span>
            Edit this page
          </span>
        </a>
      </div>
    </div>
  </div>
</section>

      
<section class="section">
  <div class="container">
    <div class="docs-content">
      <div class="content has-extra-bottom-padding">
        <p>In this guide we will create a Kubernetes cluster using Proxmox.</p>
<h2 id="video-walkthrough">Video Walkthrough</h2>
<p>To see a live demo of this writeup, visit Youtube here:</p>
<!-- raw HTML omitted -->
<h2 id="installation">Installation</h2>
<h3 id="how-to-get-proxmox">How to Get Proxmox</h3>
<p>It is assumed that you have already installed Proxmox onto the server you wish to create Talos VMs on.
Visit the <a href="https://www.proxmox.com/en/downloads">Proxmox</a> downloads page if necessary.</p>
<h3 id="install-talosctl">Install talosctl</h3>
<p>You can download <code>talosctl</code> via
<a href="https://github.com/talos-systems/talos/releases">github.com/talos-systems/talos/releases</a></p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl https://github.com/talos-systems/talos/releases/download/&lt;version&gt;/talosctl-&lt;platform&gt;-&lt;arch&gt; -L -o talosctl
</span></span></code></pre></div><p>For example version <code>v0.10.0</code> for <code>linux</code> platform:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl https://github.com/talos-systems/talos/releases/latest/download/talosctl-linux-amd64 -L -o talosctl
</span></span><span style="display:flex;"><span>sudo cp talosctl /usr/local/bin
</span></span><span style="display:flex;"><span>sudo chmod +x /usr/local/bin/talosctl
</span></span></code></pre></div><h3 id="download-iso-image">Download ISO Image</h3>
<p>In order to install Talos in Proxmox, you will need the ISO image from the Talos release page.
You can download <code>talos-amd64.iso</code> via
<a href="https://github.com/talos-systems/talos/releases">github.com/talos-systems/talos/releases</a></p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir -p _out/
</span></span><span style="display:flex;"><span>curl https://github.com/talos-systems/talos/releases/download/&lt;version&gt;/talos-&lt;arch&gt;.iso -L -o _out/talos-&lt;arch&gt;.iso
</span></span></code></pre></div><p>For example version <code>v0.10.0</code> for <code>linux</code> platform:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir -p _out/
</span></span><span style="display:flex;"><span>curl https://github.com/talos-systems/talos/releases/latest/download/talos-amd64.iso -L -o _out/talos-amd64.iso
</span></span></code></pre></div><h2 id="upload-iso">Upload ISO</h2>
<p>From the Proxmox UI, select the &ldquo;local&rdquo; storage and enter the &ldquo;Content&rdquo; section.
Click the &ldquo;Upload&rdquo; button:</p>
<!-- raw HTML omitted -->
<p>Select the ISO you downloaded previously, then hit &ldquo;Upload&rdquo;</p>
<!-- raw HTML omitted -->
<h2 id="create-vms">Create VMs</h2>
<p>Start by creating a new VM by clicking the &ldquo;Create VM&rdquo; button in the Proxmox UI:</p>
<!-- raw HTML omitted -->
<p>Fill out a name for the new VM:</p>
<!-- raw HTML omitted -->
<p>In the OS tab, select the ISO we uploaded earlier:</p>
<!-- raw HTML omitted -->
<p>Keep the defaults set in the &ldquo;System&rdquo; tab.</p>
<p>Keep the defaults in the &ldquo;Hard Disk&rdquo; tab as well, only changing the size if desired.</p>
<p>In the &ldquo;CPU&rdquo; section, give at least 2 cores to the VM:</p>
<!-- raw HTML omitted -->
<p>Verify that the RAM is set to at least 2GB:</p>
<!-- raw HTML omitted -->
<p>Keep the default values for networking, verifying that the VM is set to come up on the bridge interface:</p>
<!-- raw HTML omitted -->
<p>Finish creating the VM by clicking through the &ldquo;Confirm&rdquo; tab and then &ldquo;Finish&rdquo;.</p>
<p>Repeat this process for a second VM to use as a worker node.
You can also repeat this for additional nodes desired.</p>
<h2 id="start-control-plane-node">Start Control Plane Node</h2>
<p>Once the VMs have been created and updated, start the VM that will be the first control plane node.
This VM will boot the ISO image specified earlier and enter &ldquo;maintenance mode&rdquo;.
Once the machine has entered maintenance mode, there will be a console log that details the IP address that the node received.
Take note of this IP address, which will be referred to as <code>$CONTROL_PLANE_IP</code> for the rest of this guide.
If you wish to export this IP as a bash variable, simply issue a command like <code>export CONTROL_PLANE_IP=1.2.3.4</code>.</p>
<!-- raw HTML omitted -->
<h2 id="generate-machine-configurations">Generate Machine Configurations</h2>
<p>With the IP address above, you can now generate the machine configurations to use for installing Talos and Kubernetes.
Issue the following command, updating the output directory, cluster name, and control plane IP as you see fit:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>talosctl gen config talos-vbox-cluster https://<span style="color:#268bd2">$CONTROL_PLANE_IP</span>:6443 --output-dir _out
</span></span></code></pre></div><p>This will create several files in the _out directory: init.yaml, controlplane.yaml, join.yaml, and talosconfig.</p>
<h2 id="create-control-plane-node">Create Control Plane Node</h2>
<p>Using the <code>init.yaml</code> generated above, you can now apply this config using talosctl.
Issue:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>talosctl apply-config --insecure --nodes <span style="color:#268bd2">$CONTROL_PLANE_IP</span> --file _out/init.yaml
</span></span></code></pre></div><p>You should now see some action in the Proxmox console for this VM.
Talos will be installed to disk, the VM will reboot, and then Talos will configure the Kubernetes control plane on this VM.</p>
<blockquote>
<p>Note: This process can be repeated multiple times to create an HA control plane.
Simply apply <code>controlplane.yaml</code> instead of <code>init.yaml</code> for subsequent nodes.</p>
</blockquote>
<h2 id="create-worker-node">Create Worker Node</h2>
<p>Create at least a single worker node using a process similar to the control plane creation above.
Start the worker node VM and wait for it to enter &ldquo;maintenance mode&rdquo;.
Take note of the worker node&rsquo;s IP address, which will be referred to as <code>$WORKER_IP</code></p>
<p>Issue:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>talosctl apply-config --insecure --nodes <span style="color:#268bd2">$WORKER_IP</span> --file _out/join.yaml
</span></span></code></pre></div><blockquote>
<p>Note: This process can be repeated multiple times to add additional workers.</p>
</blockquote>
<h2 id="using-the-cluster">Using the Cluster</h2>
<p>Once the cluster is available, you can make use of <code>talosctl</code> and <code>kubectl</code> to interact with the cluster.
For example, to view current running containers, run <code>talosctl containers</code> for a list of containers in the <code>system</code> namespace, or <code>talosctl containers -k</code> for the <code>k8s.io</code> namespace.
To view the logs of a container, use <code>talosctl logs &lt;container&gt;</code> or <code>talosctl logs -k &lt;container&gt;</code>.</p>
<p>First, configure talosctl to talk to your control plane node by issuing the following, updating paths and IPs as necessary:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#b58900">export</span> <span style="color:#268bd2">TALOSCONFIG</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#34;_out/talosconfig&#34;</span>
</span></span><span style="display:flex;"><span>talosctl config endpoint <span style="color:#268bd2">$CONTROL_PLANE_IP</span>
</span></span><span style="display:flex;"><span>talosctl config node <span style="color:#268bd2">$CONTROL_PLANE_IP</span>
</span></span></code></pre></div><h2 id="retrieve-and-configure-the-kubeconfig">Retrieve and Configure the <code>kubeconfig</code></h2>
<p>Fetch the kubeconfig file from the control plane node by issuing:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>talosctl kubeconfig
</span></span></code></pre></div><p>You can then use kubectl in this fashion:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl get nodes
</span></span></code></pre></div><h2 id="cleaning-up">Cleaning Up</h2>
<p>To cleanup, simply stop and delete the virtual machines from the Proxmox UI.</p>

      </div>
    </div>
  </div>
</section>


      
<section class="section">
  <div class="container">
    <nav class="pagination" role="navigation" aria-label="pagination">
      
      <a class="pagination-previous has-text-white has-background-primary" href="/docs/v0.10/virtualized-platforms/kvm/">
        <span class="icon">
          <ion-icon name="arrow-back-outline"></ion-icon>
        </span>
        <span>
          KVM
        </span>
      </a>
      

      
      <a class="pagination-next has-text-white has-background-primary" href="/docs/v0.10/virtualized-platforms/vmware/">
        <span>
          VMware
        </span>

        <span class="icon">
          <ion-icon name="arrow-forward-outline"></ion-icon>
        </span>
      </a>
      
    </nav>
  </div>
</section>


      






<section class="hero">
  <div class="hero-body">
    <div class="container">
      <hr />

      <p class="has-text-weight-light">
        &copy; 2019-2022 Longhorn Authors | Documentation Distributed under CC-BY-4.0
      </p>

      <br />

      <p class="has-text-weight-light">
        &copy; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/" target="_blank">Trademark Usage</a> page.
      </p>
    </div>
  </div>
</section>

    </div>
    
  </div>

  
<div class="drawer" :class="{ 'is-visible': drawer }">
  


<aside class="nav is-drawer">
  
  <span class="icon is-hoverable" @click="drawer = !drawer">
    <ion-icon size="large" name="close-circle-outline"></ion-icon>
  </span>
  

  
  
  
   
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/">
      Welcome
    </a>

    
  </div>

  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/introduction/">
      Introduction
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/introduction/what-is-talos/">
          What is Talos?
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/introduction/quickstart/">
          Quickstart
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/introduction/getting-started/">
          Getting Started
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/introduction/system-requirements/">
          System Requirements
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/introduction/what-is-new/">
          What&#39;s New in Talos 0.10
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/bare-metal-platforms/">
      Bare Metal Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/bare-metal-platforms/digital-rebar/">
          Digital Rebar
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/bare-metal-platforms/equinix-metal/">
          Equinix Metal
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/bare-metal-platforms/matchbox/">
          Matchbox
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/bare-metal-platforms/sidero/">
          Sidero
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/virtualized-platforms/">
      Virtualized Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/virtualized-platforms/hyper-v/">
          Hyper-V
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/virtualized-platforms/kvm/">
          KVM
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a class="is-active" href="/docs/v0.10/virtualized-platforms/proxmox/">
          Proxmox
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/virtualized-platforms/vmware/">
          VMware
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/virtualized-platforms/xen/">
          Xen
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/cloud-platforms/">
      Cloud Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/cloud-platforms/aws/">
          AWS
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/cloud-platforms/azure/">
          Azure
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/cloud-platforms/digitalocean/">
          DigitalOcean
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/cloud-platforms/gcp/">
          GCP
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/cloud-platforms/openstack/">
          Openstack
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/local-platforms/">
      Local Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/local-platforms/docker/">
          Docker
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/local-platforms/firecracker/">
          Firecracker
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/local-platforms/qemu/">
          QEMU
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/local-platforms/virtualbox/">
          VirtualBox
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/single-board-computers/">
      Single Board Computers
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/single-board-computers/bananapi_m64/">
          Banana Pi M64
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/single-board-computers/libretech_all_h3_cc_h5/">
          Libre Computer Board ALL-H3-CC
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/single-board-computers/rock64/">
          Pine64 Rock64
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/single-board-computers/rockpi_4/">
          Radxa ROCK PI 4c
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/single-board-computers/rpi_4/">
          Raspberry Pi 4 Model B
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/guides/">
      Guides
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/advanced-networking/">
          Advanced Networking
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/air-gapped/">
          Air-gapped Environments
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-certificate-authorities/">
          Configuring Certificate Authorities
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-containerd/">
          Configuring Containerd
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-corporate-proxies/">
          Configuring Corporate Proxies
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-network-connectivity/">
          Configuring Network Connectivity
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-pull-through-cache/">
          Configuring Pull Through Cache
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-the-cluster-endpoint/">
          Configuring the Cluster Endpoint
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/configuring-wireguard-network/">
          Configuring Wireguard Network
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/converting-control-plane/">
          Converting Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/customizing-the-kernel/">
          Customizing the Kernel
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/customizing-the-root-filesystem/">
          Customizing the Root Filesystem
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/deploy-metrics-server/">
          Deploying Metrics Server
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/disaster-recovery/">
          Disaster Recovery
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/disk-encryption/">
          Disk Encryption
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/editing-machine-configuration/">
          Editing Machine Configuration
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/managing-pki/">
          Managing PKI
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/resetting-a-machine/">
          Resetting a Machine
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/storage/">
          Storage
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/troubleshooting-control-plane/">
          Troubleshooting Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/upgrading-kubernetes/">
          Upgrading Kubernetes
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/upgrading-talos/">
          Upgrading Talos
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/guides/vip/">
          Virtual (shared) IP
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/reference/">
      Reference
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/reference/kernel/">
          Kernel
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/reference/platform/">
          Platform
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.10/learn-more/">
      Learn More
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/philosophy/">
          Philosophy
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/concepts/">
          Concepts
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/architecture/">
          Architecture
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/components/">
          Components
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/upgrades/">
          Upgrades
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/faqs/">
          FAQs
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/talosctl/">
          talosctl
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/control-plane/">
          Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.10/learn-more/controllers-resources/">
          Controllers and Resources
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</aside>

</div>

</div>


  
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.2.5/dist/alpine.min.js" defer></script>

<script type="module" src="https://unpkg.com/ionicons@5.0.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule="" src="https://unpkg.com/ionicons@5.0.0/dist/ionicons/ionicons.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/js/jquery.matchHeight.js"></script>
<script src="/js/scripts.js"></script>

<script>
  anchors.options = {
    icon: '#'
  }

  document.addEventListener('DOMContentLoaded', function(event) {
    anchors.add('.content h1, .content h2, .content h3, .content h4, .content h5, .content h6');
  });
</script>


<script>
  const navbarHeight = document.getElementsByClassName('navbar')[0].offsetHeight;
  const extraPadding = 15;
  const navbarOffset = -1 * (navbarHeight + extraPadding);
  var shiftWindow = function() { scrollBy(0, navbarOffset) };
  window.addEventListener("hashchange", shiftWindow);
  window.addEventListener("pageshow", shiftWindow);
  function load() { if (window.location.hash) shiftWindow(); }
</script>



<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
  docsearch({
    apiKey: '3c4082e162be342fa20a794144b4a479',
    indexName: 'longhorn',
    inputSelector: '#search-input',
    algoliaOptions: { 'facetFilters': ["version:v0.10"] },
    debug: false
  });
</script>

  </body>

</html>
