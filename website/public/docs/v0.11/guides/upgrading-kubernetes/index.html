


<!DOCTYPE html>
<html lang="en-us">

<head>
  













<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">




<link rel="canonical" href="https://talos.dev/docs/latest/guides/upgrading-kubernetes/">



<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://talos.dev/img/logos/longhorn-icon-color.png">
<meta name="twitter:image:alt" content="Talos Linux color logo">



<meta property="og:url" content="https://talos.dev/docs/v0.11/guides/upgrading-kubernetes/">
<meta property="og:title" content="Talos Linux | Upgrading Kubernetes">

<meta property="og:type" content="article">
<meta property="og:site_name" content="Talos Linux">
<meta property="og:image" content="https://talos.dev/img/logos/longhorn-icon-color.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:alt" content="Talos Linux color logo">
<meta property="og:locale" content="en_US">


<meta name="robots" content="noindex">



  <title>
    
Talos Linux | Documentation

  </title>

  









<link rel="stylesheet" href="/css/style.d4f1ecd1424891e50994bf3612432659314faa7af1abc56b06aca280b90673fb.css" integrity="sha256-1PHs0UJIkeUJlL82EkMmWTFPqnrxq8VrBqyigLkGc/s=">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

  <link rel="shortcut icon" type="image/png" sizes="32x32" href="/favicon.png">

</head>
<body>
  





<div class="canvas" id="canvas" x-data="{ drawer: false }">
  







<nav class="navbar is-fixed-top has-shadow" x-data="{ open: false }">
  
    <div class="navbar-brand">
      <a class="navbar-item" href="https://talos.dev">
        <img src="/img/logos/Sidero_horizontal_lightbkgd_RGB.png" alt="Talos Linux navbar logo">
      </a>

      <a role="button" class="navbar-burger" data-target="menu" aria-label="menu" aria-expanded="false" :class="{ 'is-active': open }" @click="open = !open" @click.away="open = false">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div class="navbar-menu" id="menu" :class="{ 'is-active': open }">
      <div class="navbar-end">
        <div class="navbar-item is-hidden-touch">
  <p class="control has-icons-left">
    <input class="input is-rounded" type="text" placeholder="Search" id="search-input">
    <span class="icon is-small is-left">
      <ion-icon name="search-outline"></ion-icon>
    </span>
  </p>
</div>


        


<nav class="navbar" role="navigation" aria-label="dropdown navigation">
  <div class="navbar-item has-dropdown is-hoverable">
    <a class="navbar-link is-arrowless" href="/docs/v1.0">
      <span class="has-text-weight-bold">
        Docs
      </span>
      <span class="icon has-text-secondary">
        <ion-icon name="chevron-down-outline"></ion-icon>
      </span>
    </a>

    <div class="navbar-dropdown">
      
      
      
      <a class="navbar-item" href="/docs/v1.0">
        v1.0 (<strong>latest</strong>)
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.14">
        v0.14
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.13">
        v0.13
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.12">
        v0.12
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.11">
        v0.11
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.10">
        v0.10
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.9">
        v0.9
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.8">
        v0.8
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.7">
        v0.7
      </a>
      
      
      
      <a class="navbar-item" href="/docs/v0.6">
        v0.6
      </a>
      
    </div>
  </div>
</nav>


        
        




<a class="navbar-item has-text-weight-bold" href="https://sidero.dev"  target="_blank" >
  <span>
    Sidero Metal
  </span>
</a>





<a class="navbar-item has-text-weight-bold" href="https://github.com/talos-systems/talos"  target="_blank" >
  <span>
    GitHub
  </span>
</a>





<a class="navbar-item has-text-weight-bold" href="https://taloscommunity.slack.com"  target="_blank" >
  <span>
    Slack
  </span>
</a>



        

        <div class="navbar-item">
          



<div class="buttons is-left">
  

  

  
</div>

        </div>
      </div>
    </div>
  
</nav>

  

<nav class="navbar is-black is-hidden-desktop under-nav">
  <div class="navbar-brand">
    <div class="navbar-item is-hidden-desktop">
      <a class="button is-black is-borderless has-text-weight-light" @click="drawer = !drawer">
        <span class="icon">
          <ion-icon name="list"></ion-icon>
        </span>
        <span>
          Docs
        </span>
      </a>
    </div>
  </div>
</nav>


  <div class="dashboard">
    
    <div class="dashboard-panel sidebar is-hidden-touch">
      


<aside class="nav is-sidebar">
  

  
  
  
  
  
  
   
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/">
      Welcome
    </a>

    
  </div>

  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/introduction/">
      Introduction
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/introduction/what-is-talos/">
          What is Talos?
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/introduction/quickstart/">
          Quickstart
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/introduction/getting-started/">
          Getting Started
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/introduction/system-requirements/">
          System Requirements
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/introduction/what-is-new/">
          What&#39;s New in Talos 0.11
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/bare-metal-platforms/">
      Bare Metal Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/bare-metal-platforms/digital-rebar/">
          Digital Rebar
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/bare-metal-platforms/equinix-metal/">
          Equinix Metal
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/bare-metal-platforms/matchbox/">
          Matchbox
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/bare-metal-platforms/sidero/">
          Sidero
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/virtualized-platforms/">
      Virtualized Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/virtualized-platforms/hyper-v/">
          Hyper-V
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/virtualized-platforms/kvm/">
          KVM
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/virtualized-platforms/proxmox/">
          Proxmox
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/virtualized-platforms/vmware/">
          VMware
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/virtualized-platforms/xen/">
          Xen
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/cloud-platforms/">
      Cloud Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/cloud-platforms/aws/">
          AWS
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/cloud-platforms/azure/">
          Azure
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/cloud-platforms/digitalocean/">
          DigitalOcean
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/cloud-platforms/gcp/">
          GCP
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/cloud-platforms/openstack/">
          Openstack
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/local-platforms/">
      Local Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/local-platforms/docker/">
          Docker
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/local-platforms/firecracker/">
          Firecracker
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/local-platforms/qemu/">
          QEMU
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/local-platforms/virtualbox/">
          VirtualBox
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/single-board-computers/">
      Single Board Computers
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/bananapi_m64/">
          Banana Pi M64
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/libretech_all_h3_cc_h5/">
          Libre Computer Board ALL-H3-CC
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/pine64/">
          Pine64
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/rock64/">
          Pine64 Rock64
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/rockpi_4/">
          Radxa ROCK PI 4c
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/rpi_4/">
          Raspberry Pi 4 Model B
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/guides/">
      Guides
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/advanced-networking/">
          Advanced Networking
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/air-gapped/">
          Air-gapped Environments
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-certificate-authorities/">
          Configuring Certificate Authorities
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-containerd/">
          Configuring Containerd
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-corporate-proxies/">
          Configuring Corporate Proxies
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-network-connectivity/">
          Configuring Network Connectivity
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-pull-through-cache/">
          Configuring Pull Through Cache
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-the-cluster-endpoint/">
          Configuring the Cluster Endpoint
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-wireguard-network/">
          Configuring Wireguard Network
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/converting-control-plane/">
          Converting Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/customizing-the-kernel/">
          Customizing the Kernel
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/customizing-the-root-filesystem/">
          Customizing the Root Filesystem
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/deploy-metrics-server/">
          Deploying Metrics Server
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/disaster-recovery/">
          Disaster Recovery
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/disk-encryption/">
          Disk Encryption
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/editing-machine-configuration/">
          Editing Machine Configuration
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/managing-pki/">
          Managing PKI
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/resetting-a-machine/">
          Resetting a Machine
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/rbac/">
          Role-based access control (RBAC)
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/storage/">
          Storage
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/troubleshooting-control-plane/">
          Troubleshooting Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a class="is-active" href="/docs/v0.11/guides/upgrading-kubernetes/">
          Upgrading Kubernetes
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/upgrading-talos/">
          Upgrading Talos
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/vip/">
          Virtual (shared) IP
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/reference/">
      Reference
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/reference/kernel/">
          Kernel
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/reference/platform/">
          Platform
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/learn-more/">
      Learn More
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/philosophy/">
          Philosophy
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/concepts/">
          Concepts
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/architecture/">
          Architecture
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/components/">
          Components
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/upgrades/">
          Upgrades
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/faqs/">
          FAQs
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/talosctl/">
          talosctl
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/control-plane/">
          Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/controllers-resources/">
          Controllers and Resources
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/networking-resources/">
          Networking Resources
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</aside>

    </div>

    <div class="dashboard-panel main">
      



<section class="hero is-primary is-medium is-bold">
  <div class="hero-body">
    <div class="container">
      <div class="docs-content">
        <p class="title is-size-2 is-size-3-mobile has-text-weight-bold">
          Upgrading Kubernetes
        </p>

        
      </div>
      <div class="buttons">
        <a class="button is-small" href="https://github.com/longhorn/website/edit/master/content/docs/v0.11/Guides/upgrading-kubernetes.md" target="_blank">
          <span class="icon">
            <ion-icon name="logo-github"></ion-icon>
          </span>
          <span>
            Edit this page
          </span>
        </a>
      </div>
    </div>
  </div>
</section>

      
<section class="section">
  <div class="container">
    <div class="docs-content">
      <div class="content has-extra-bottom-padding">
        <p>This guide covers Kubernetes control plane upgrade for clusters running Talos-managed control plane.
If the cluster is still running self-hosted control plane (after upgrade from Talos 0.8), please
refer to 0.8 docs.</p>
<h2 id="video-walkthrough">Video Walkthrough</h2>
<p>To see a live demo of this writeup, see the video below:</p>
<!-- raw HTML omitted -->
<h2 id="automated-kubernetes-upgrade">Automated Kubernetes Upgrade</h2>
<p>To upgrade from Kubernetes v1.20.1 to v1.20.4 run:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ talosctl --nodes &lt;master node&gt; upgrade-k8s --from 1.20.1 --to 1.20.4
</span></span><span style="display:flex;"><span>discovered master nodes <span style="color:#719e07">[</span><span style="color:#2aa198">&#34;172.20.0.2&#34;</span> <span style="color:#2aa198">&#34;172.20.0.3&#34;</span> <span style="color:#2aa198">&#34;172.20.0.4&#34;</span><span style="color:#719e07">]</span>
</span></span><span style="display:flex;"><span>updating <span style="color:#2aa198">&#34;kube-apiserver&#34;</span> to version <span style="color:#2aa198">&#34;1.20.4&#34;</span>
</span></span><span style="display:flex;"><span> &gt; updating node <span style="color:#2aa198">&#34;172.20.0.2&#34;</span>
</span></span><span style="display:flex;"><span>2021/03/09 19:55:01 retrying error: config version mismatch: got <span style="color:#2aa198">&#34;2&#34;</span>, expected <span style="color:#2aa198">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span> &gt; updating node <span style="color:#2aa198">&#34;172.20.0.3&#34;</span>
</span></span><span style="display:flex;"><span>2021/03/09 19:55:05 retrying error: config version mismatch: got <span style="color:#2aa198">&#34;2&#34;</span>, expected <span style="color:#2aa198">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span> &gt; updating node <span style="color:#2aa198">&#34;172.20.0.4&#34;</span>
</span></span><span style="display:flex;"><span>2021/03/09 19:55:07 retrying error: config version mismatch: got <span style="color:#2aa198">&#34;2&#34;</span>, expected <span style="color:#2aa198">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>updating <span style="color:#2aa198">&#34;kube-controller-manager&#34;</span> to version <span style="color:#2aa198">&#34;1.20.4&#34;</span>
</span></span><span style="display:flex;"><span> &gt; updating node <span style="color:#2aa198">&#34;172.20.0.2&#34;</span>
</span></span><span style="display:flex;"><span>2021/03/09 19:55:27 retrying error: config version mismatch: got <span style="color:#2aa198">&#34;2&#34;</span>, expected <span style="color:#2aa198">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span> &gt; updating node <span style="color:#2aa198">&#34;172.20.0.3&#34;</span>
</span></span><span style="display:flex;"><span>2021/03/09 19:55:47 retrying error: config version mismatch: got <span style="color:#2aa198">&#34;2&#34;</span>, expected <span style="color:#2aa198">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span> &gt; updating node <span style="color:#2aa198">&#34;172.20.0.4&#34;</span>
</span></span><span style="display:flex;"><span>2021/03/09 19:56:07 retrying error: config version mismatch: got <span style="color:#2aa198">&#34;2&#34;</span>, expected <span style="color:#2aa198">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>updating <span style="color:#2aa198">&#34;kube-scheduler&#34;</span> to version <span style="color:#2aa198">&#34;1.20.4&#34;</span>
</span></span><span style="display:flex;"><span> &gt; updating node <span style="color:#2aa198">&#34;172.20.0.2&#34;</span>
</span></span><span style="display:flex;"><span>2021/03/09 19:56:27 retrying error: config version mismatch: got <span style="color:#2aa198">&#34;2&#34;</span>, expected <span style="color:#2aa198">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span> &gt; updating node <span style="color:#2aa198">&#34;172.20.0.3&#34;</span>
</span></span><span style="display:flex;"><span>2021/03/09 19:56:47 retrying error: config version mismatch: got <span style="color:#2aa198">&#34;2&#34;</span>, expected <span style="color:#2aa198">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span> &gt; updating node <span style="color:#2aa198">&#34;172.20.0.4&#34;</span>
</span></span><span style="display:flex;"><span>2021/03/09 19:57:08 retrying error: config version mismatch: got <span style="color:#2aa198">&#34;2&#34;</span>, expected <span style="color:#2aa198">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>updating daemonset <span style="color:#2aa198">&#34;kube-proxy&#34;</span> to version <span style="color:#2aa198">&#34;1.20.4&#34;</span>
</span></span></code></pre></div><p>Script runs in two phases:</p>
<ol>
<li>In the first phase every control plane node machine configuration is patched with new image version for each control plane component.
Talos renders new static pod definition on configuration update which is picked up by the kubelet.
Script waits for the change to propagate to the API server state.
Messages <code>config version mismatch</code> indicate that script is waiting for the updated container to be registered in the API server.</li>
<li>In the second phase script updates <code>kube-proxy</code> daemonset with the new image version.</li>
</ol>
<p>If script fails for any reason, it can be safely restarted to continue upgrade process.</p>
<h2 id="manual-kubernetes-upgrade">Manual Kubernetes Upgrade</h2>
<p>Kubernetes can be upgraded manually as well by following the steps outlined below.
They are equivalent to the steps performed by the <code>talosctl upgrade-k8s</code> command.</p>
<h3 id="kubeconfig">Kubeconfig</h3>
<p>In order to edit the control plane, we will need a working <code>kubectl</code> config.
If you don&rsquo;t already have one, you can get one by running:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>talosctl --nodes &lt;master node&gt; kubeconfig
</span></span></code></pre></div><h3 id="api-server">API Server</h3>
<p>Patch machine configuration using <code>talosctl patch</code> command:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ talosctl -n &lt;CONTROL_PLANE_IP_1&gt; patch mc --immediate -p <span style="color:#2aa198">&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/cluster/apiServer/image&#34;, &#34;value&#34;: &#34;k8s.gcr.io/kube-apiserver:v1.20.4&#34;}]&#39;</span>
</span></span><span style="display:flex;"><span>patched mc at the node 172.20.0.2
</span></span></code></pre></div><p>JSON patch might need to be adjusted if current machine configuration is missing <code>.cluster.apiServer.image</code> key.</p>
<p>Also machine configuration can be edited manually with <code>talosctl -n &lt;IP&gt;  edit mc --immediate</code>.</p>
<p>Capture new version of <code>kube-apiserver</code> config with:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ talosctl -n &lt;CONTROL_PLANE_IP_1&gt; get kcpc kube-apiserver -o yaml
</span></span><span style="display:flex;"><span>node: 172.20.0.2
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>    namespace: config
</span></span><span style="display:flex;"><span>    type: KubernetesControlPlaneConfigs.config.talos.dev
</span></span><span style="display:flex;"><span>    id: kube-apiserver
</span></span><span style="display:flex;"><span>    version: <span style="color:#2aa198">5</span>
</span></span><span style="display:flex;"><span>    phase: running
</span></span><span style="display:flex;"><span>spec:
</span></span><span style="display:flex;"><span>    image: k8s.gcr.io/kube-apiserver:v1.20.4
</span></span><span style="display:flex;"><span>    cloudProvider: <span style="color:#2aa198">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    controlPlaneEndpoint: https://172.20.0.1:6443
</span></span><span style="display:flex;"><span>    etcdServers:
</span></span><span style="display:flex;"><span>        - https://127.0.0.1:2379
</span></span><span style="display:flex;"><span>    localPort: <span style="color:#2aa198">6443</span>
</span></span><span style="display:flex;"><span>    serviceCIDR: 10.96.0.0/12
</span></span><span style="display:flex;"><span>    extraArgs: <span style="color:#719e07">{}</span>
</span></span><span style="display:flex;"><span>    extraVolumes: <span style="color:#719e07">[]</span>
</span></span></code></pre></div><p>In this example, new version is <code>5</code>.
Wait for the new pod definition to propagate to the API server state (replace <code>talos-default-master-1</code> with the node name):</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl get pod -n kube-system -l k8s-app<span style="color:#719e07">=</span>kube-apiserver --field-selector spec.nodeName<span style="color:#719e07">=</span>talos-default-master-1 -o <span style="color:#268bd2">jsonpath</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#39;{.items[0].metadata.annotations.talos\.dev/config\-version}&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#2aa198">5</span>
</span></span></code></pre></div><p>Check that the pod is running:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl get pod -n kube-system -l k8s-app<span style="color:#719e07">=</span>kube-apiserver --field-selector spec.nodeName<span style="color:#719e07">=</span>talos-default-master-1
</span></span><span style="display:flex;"><span>NAME                                    READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>kube-apiserver-talos-default-master-1   1/1     Running   <span style="color:#2aa198">0</span>          16m
</span></span></code></pre></div><p>Repeat this process for every control plane node, verifying that state got propagated successfully between each node update.</p>
<h3 id="controller-manager">Controller Manager</h3>
<p>Patch machine configuration using <code>talosctl patch</code> command:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ talosctl -n &lt;CONTROL_PLANE_IP_1&gt; patch mc --immediate -p <span style="color:#2aa198">&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/cluster/controllerManager/image&#34;, &#34;value&#34;: &#34;k8s.gcr.io/kube-controller-manager:v1.20.4&#34;}]&#39;</span>
</span></span><span style="display:flex;"><span>patched mc at the node 172.20.0.2
</span></span></code></pre></div><p>JSON patch might need be adjusted if current machine configuration is missing <code>.cluster.controllerManager.image</code> key.</p>
<p>Capture new version of <code>kube-controller-manager</code> config with:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ talosctl -n &lt;CONTROL_PLANE_IP_1&gt; get kcpc kube-controller-manager -o yaml
</span></span><span style="display:flex;"><span>node: 172.20.0.2
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>    namespace: config
</span></span><span style="display:flex;"><span>    type: KubernetesControlPlaneConfigs.config.talos.dev
</span></span><span style="display:flex;"><span>    id: kube-controller-manager
</span></span><span style="display:flex;"><span>    version: <span style="color:#2aa198">3</span>
</span></span><span style="display:flex;"><span>    phase: running
</span></span><span style="display:flex;"><span>spec:
</span></span><span style="display:flex;"><span>    image: k8s.gcr.io/kube-controller-manager:v1.20.4
</span></span><span style="display:flex;"><span>    cloudProvider: <span style="color:#2aa198">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    podCIDR: 10.244.0.0/16
</span></span><span style="display:flex;"><span>    serviceCIDR: 10.96.0.0/12
</span></span><span style="display:flex;"><span>    extraArgs: <span style="color:#719e07">{}</span>
</span></span><span style="display:flex;"><span>    extraVolumes: <span style="color:#719e07">[]</span>
</span></span></code></pre></div><p>In this example, new version is <code>3</code>.
Wait for the new pod definition to propagate to the API server state (replace <code>talos-default-master-1</code> with the node name):</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl get pod -n kube-system -l k8s-app<span style="color:#719e07">=</span>kube-controller-manager --field-selector spec.nodeName<span style="color:#719e07">=</span>talos-default-master-1 -o <span style="color:#268bd2">jsonpath</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#39;{.items[0].metadata.annotations.talos\.dev/config\-version}&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#2aa198">3</span>
</span></span></code></pre></div><p>Check that the pod is running:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl get pod -n kube-system -l k8s-app<span style="color:#719e07">=</span>kube-controller-manager --field-selector spec.nodeName<span style="color:#719e07">=</span>talos-default-master-1
</span></span><span style="display:flex;"><span>NAME                                             READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>kube-controller-manager-talos-default-master-1   1/1     Running   <span style="color:#2aa198">0</span>          35m
</span></span></code></pre></div><p>Repeat this process for every control plane node, verifying that state got propagated successfully between each node update.</p>
<h3 id="scheduler">Scheduler</h3>
<p>Patch machine configuration using <code>talosctl patch</code> command:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ talosctl -n &lt;CONTROL_PLANE_IP_1&gt; patch mc --immediate -p <span style="color:#2aa198">&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/cluster/scheduler/image&#34;, &#34;value&#34;: &#34;k8s.gcr.io/kube-scheduler:v1.20.4&#34;}]&#39;</span>
</span></span><span style="display:flex;"><span>patched mc at the node 172.20.0.2
</span></span></code></pre></div><p>JSON patch might need be adjusted if current machine configuration is missing <code>.cluster.scheduler.image</code> key.</p>
<p>Capture new version of <code>kube-scheduler</code> config with:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ talosctl -n &lt;CONTROL_PLANE_IP_1&gt; get kcpc kube-scheduler -o yaml
</span></span><span style="display:flex;"><span>node: 172.20.0.2
</span></span><span style="display:flex;"><span>metadata:
</span></span><span style="display:flex;"><span>    namespace: config
</span></span><span style="display:flex;"><span>    type: KubernetesControlPlaneConfigs.config.talos.dev
</span></span><span style="display:flex;"><span>    id: kube-scheduler
</span></span><span style="display:flex;"><span>    version: <span style="color:#2aa198">3</span>
</span></span><span style="display:flex;"><span>    phase: running
</span></span><span style="display:flex;"><span>spec:
</span></span><span style="display:flex;"><span>    image: k8s.gcr.io/kube-scheduler:v1.20.4
</span></span><span style="display:flex;"><span>    extraArgs: <span style="color:#719e07">{}</span>
</span></span><span style="display:flex;"><span>    extraVolumes: <span style="color:#719e07">[]</span>
</span></span></code></pre></div><p>In this example, new version is <code>3</code>.
Wait for the new pod definition to propagate to the API server state (replace <code>talos-default-master-1</code> with the node name):</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl get pod -n kube-system -l k8s-app<span style="color:#719e07">=</span>kube-scheduler --field-selector spec.nodeName<span style="color:#719e07">=</span>talos-default-master-1 -o <span style="color:#268bd2">jsonpath</span><span style="color:#719e07">=</span><span style="color:#2aa198">&#39;{.items[0].metadata.annotations.talos\.dev/config\-version}&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#2aa198">3</span>
</span></span></code></pre></div><p>Check that the pod is running:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl get pod -n kube-system -l k8s-app<span style="color:#719e07">=</span>kube-scheduler --field-selector spec.nodeName<span style="color:#719e07">=</span>talos-default-master-1
</span></span><span style="display:flex;"><span>NAME                                    READY   STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>kube-scheduler-talos-default-master-1   1/1     Running   <span style="color:#2aa198">0</span>          39m
</span></span></code></pre></div><p>Repeat this process for every control plane node, verifying that state got propagated successfully between each node update.</p>
<h3 id="proxy">Proxy</h3>
<p>In the proxy&rsquo;s <code>DaemonSet</code>, change:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#268bd2">kind</span>: DaemonSet
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#268bd2">spec</span>:
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>  <span style="color:#268bd2">template</span>:
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#268bd2">containers</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#268bd2">name</span>: kube-proxy
</span></span><span style="display:flex;"><span>          <span style="color:#268bd2">image</span>: k8s.gcr.io/kube-proxy:v1.20.1
</span></span><span style="display:flex;"><span>      <span style="color:#268bd2">tolerations</span>:
</span></span><span style="display:flex;"><span>        - ...
</span></span></code></pre></div><p>to:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#268bd2">kind</span>: DaemonSet
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#268bd2">spec</span>:
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>  <span style="color:#268bd2">template</span>:
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">spec</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#268bd2">containers</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#268bd2">name</span>: kube-proxy
</span></span><span style="display:flex;"><span>          <span style="color:#268bd2">image</span>: k8s.gcr.io/kube-proxy:v1.20.4
</span></span><span style="display:flex;"><span>      <span style="color:#268bd2">tolerations</span>:
</span></span><span style="display:flex;"><span>        - ...
</span></span><span style="display:flex;"><span>        - <span style="color:#268bd2">key</span>: node-role.kubernetes.io/control-plane
</span></span><span style="display:flex;"><span>          <span style="color:#268bd2">operator</span>: Exists
</span></span><span style="display:flex;"><span>          <span style="color:#268bd2">effect</span>: NoSchedule
</span></span></code></pre></div><p>To edit the <code>DaemonSet</code>, run:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl edit daemonsets -n kube-system kube-proxy
</span></span></code></pre></div><h2 id="kubelet">Kubelet</h2>
<p>Upgrading Kubelet version requires Talos node reboot after machine configuration change.</p>
<p>For every node, patch machine configuration with new kubelet version, wait for the node to reboot:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ talosctl -n &lt;IP&gt; patch mc -p <span style="color:#2aa198">&#39;[{&#34;op&#34;: &#34;replace&#34;, &#34;path&#34;: &#34;/machine/kubelet/image&#34;, &#34;value&#34;: &#34;ghcr.io/talos-systems/kubelet:v1.20.4&#34;}]&#39;</span>
</span></span><span style="display:flex;"><span>patched mc at the node 172.20.0.2
</span></span></code></pre></div><p>Once node boots with the new configuration, confirm upgrade with <code>kubectl get nodes &lt;name&gt;</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ kubectl get nodes talos-default-master-1
</span></span><span style="display:flex;"><span>NAME                     STATUS   ROLES                  AGE    VERSION
</span></span><span style="display:flex;"><span>talos-default-master-1   Ready    control-plane,master   123m   v1.20.4
</span></span></code></pre></div>
      </div>
    </div>
  </div>
</section>


      
<section class="section">
  <div class="container">
    <nav class="pagination" role="navigation" aria-label="pagination">
      
      <a class="pagination-previous has-text-white has-background-primary" href="/docs/v0.11/guides/troubleshooting-control-plane/">
        <span class="icon">
          <ion-icon name="arrow-back-outline"></ion-icon>
        </span>
        <span>
          Troubleshooting Control Plane
        </span>
      </a>
      

      
      <a class="pagination-next has-text-white has-background-primary" href="/docs/v0.11/guides/upgrading-talos/">
        <span>
          Upgrading Talos
        </span>

        <span class="icon">
          <ion-icon name="arrow-forward-outline"></ion-icon>
        </span>
      </a>
      
    </nav>
  </div>
</section>


      






<section class="hero">
  <div class="hero-body">
    <div class="container">
      <hr />

      <p class="has-text-weight-light">
        &copy; 2019-2022 Longhorn Authors | Documentation Distributed under CC-BY-4.0
      </p>

      <br />

      <p class="has-text-weight-light">
        &copy; 2022 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/" target="_blank">Trademark Usage</a> page.
      </p>
    </div>
  </div>
</section>

    </div>
    
  </div>

  
<div class="drawer" :class="{ 'is-visible': drawer }">
  


<aside class="nav is-drawer">
  
  <span class="icon is-hoverable" @click="drawer = !drawer">
    <ion-icon size="large" name="close-circle-outline"></ion-icon>
  </span>
  

  
  
  
  
  
  
   
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/">
      Welcome
    </a>

    
  </div>

  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/introduction/">
      Introduction
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/introduction/what-is-talos/">
          What is Talos?
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/introduction/quickstart/">
          Quickstart
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/introduction/getting-started/">
          Getting Started
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/introduction/system-requirements/">
          System Requirements
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/introduction/what-is-new/">
          What&#39;s New in Talos 0.11
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/bare-metal-platforms/">
      Bare Metal Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/bare-metal-platforms/digital-rebar/">
          Digital Rebar
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/bare-metal-platforms/equinix-metal/">
          Equinix Metal
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/bare-metal-platforms/matchbox/">
          Matchbox
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/bare-metal-platforms/sidero/">
          Sidero
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/virtualized-platforms/">
      Virtualized Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/virtualized-platforms/hyper-v/">
          Hyper-V
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/virtualized-platforms/kvm/">
          KVM
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/virtualized-platforms/proxmox/">
          Proxmox
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/virtualized-platforms/vmware/">
          VMware
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/virtualized-platforms/xen/">
          Xen
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/cloud-platforms/">
      Cloud Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/cloud-platforms/aws/">
          AWS
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/cloud-platforms/azure/">
          Azure
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/cloud-platforms/digitalocean/">
          DigitalOcean
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/cloud-platforms/gcp/">
          GCP
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/cloud-platforms/openstack/">
          Openstack
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/local-platforms/">
      Local Platforms
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/local-platforms/docker/">
          Docker
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/local-platforms/firecracker/">
          Firecracker
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/local-platforms/qemu/">
          QEMU
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/local-platforms/virtualbox/">
          VirtualBox
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/single-board-computers/">
      Single Board Computers
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/bananapi_m64/">
          Banana Pi M64
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/libretech_all_h3_cc_h5/">
          Libre Computer Board ALL-H3-CC
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/pine64/">
          Pine64
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/rock64/">
          Pine64 Rock64
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/rockpi_4/">
          Radxa ROCK PI 4c
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/single-board-computers/rpi_4/">
          Raspberry Pi 4 Model B
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/guides/">
      Guides
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/advanced-networking/">
          Advanced Networking
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/air-gapped/">
          Air-gapped Environments
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-certificate-authorities/">
          Configuring Certificate Authorities
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-containerd/">
          Configuring Containerd
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-corporate-proxies/">
          Configuring Corporate Proxies
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-network-connectivity/">
          Configuring Network Connectivity
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-pull-through-cache/">
          Configuring Pull Through Cache
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-the-cluster-endpoint/">
          Configuring the Cluster Endpoint
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/configuring-wireguard-network/">
          Configuring Wireguard Network
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/converting-control-plane/">
          Converting Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/customizing-the-kernel/">
          Customizing the Kernel
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/customizing-the-root-filesystem/">
          Customizing the Root Filesystem
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/deploy-metrics-server/">
          Deploying Metrics Server
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/disaster-recovery/">
          Disaster Recovery
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/disk-encryption/">
          Disk Encryption
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/editing-machine-configuration/">
          Editing Machine Configuration
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/managing-pki/">
          Managing PKI
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/resetting-a-machine/">
          Resetting a Machine
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/rbac/">
          Role-based access control (RBAC)
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/storage/">
          Storage
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/troubleshooting-control-plane/">
          Troubleshooting Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a class="is-active" href="/docs/v0.11/guides/upgrading-kubernetes/">
          Upgrading Kubernetes
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/upgrading-talos/">
          Upgrading Talos
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/guides/vip/">
          Virtual (shared) IP
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/reference/">
      Reference
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/reference/kernel/">
          Kernel
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/reference/platform/">
          Platform
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  <div class="nav-section">
    <a class="nav-section-title" href="/docs/v0.11/learn-more/">
      Learn More
    </a>

    
    <ul class="nav-section-pages">
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/philosophy/">
          Philosophy
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/concepts/">
          Concepts
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/architecture/">
          Architecture
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/components/">
          Components
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/upgrades/">
          Upgrades
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/faqs/">
          FAQs
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/talosctl/">
          talosctl
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/control-plane/">
          Control Plane
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/controllers-resources/">
          Controllers and Resources
        </a>
      </li>
      
      
      <li class="nav-section-pages-link">
        <a href="/docs/v0.11/learn-more/networking-resources/">
          Networking Resources
        </a>
      </li>
      
    </ul>
    

    
  </div>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</aside>

</div>

</div>


  
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.2.5/dist/alpine.min.js" defer></script>

<script type="module" src="https://unpkg.com/ionicons@5.0.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule="" src="https://unpkg.com/ionicons@5.0.0/dist/ionicons/ionicons.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/js/jquery.matchHeight.js"></script>
<script src="/js/scripts.js"></script>

<script>
  anchors.options = {
    icon: '#'
  }

  document.addEventListener('DOMContentLoaded', function(event) {
    anchors.add('.content h1, .content h2, .content h3, .content h4, .content h5, .content h6');
  });
</script>


<script>
  const navbarHeight = document.getElementsByClassName('navbar')[0].offsetHeight;
  const extraPadding = 15;
  const navbarOffset = -1 * (navbarHeight + extraPadding);
  var shiftWindow = function() { scrollBy(0, navbarOffset) };
  window.addEventListener("hashchange", shiftWindow);
  window.addEventListener("pageshow", shiftWindow);
  function load() { if (window.location.hash) shiftWindow(); }
</script>



<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
  docsearch({
    apiKey: '3c4082e162be342fa20a794144b4a479',
    indexName: 'longhorn',
    inputSelector: '#search-input',
    algoliaOptions: { 'facetFilters': ["version:v0.11"] },
    debug: false
  });
</script>

  </body>

</html>
